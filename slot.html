<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<title>Pizza F√§nger Spiel</title>
<style>
  body {
    margin: 0;
    background: #222;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #eee;
    font-family: Arial, sans-serif;
  }
  #game {
    position: relative;
    background: #333;
    width: 400px;
    height: 500px;
    margin-top: 30px;
    border-radius: 10px;
    overflow: hidden;
    border: 3px solid #0af;
  }
  #player {
    position: absolute;
    bottom: 10px;
    width: 50px;
    height: 50px;
    background: #0af;
    border-radius: 8px;
  }
  .pizza {
    position: absolute;
    font-size: 40px;
    user-select: none;
  }
  #score {
    margin-top: 15px;
    font-size: 22px;
  }
</style>
</head>
<body>

<h1>Pizza F√§nger üçï</h1>
<div id="game">
  <div id="player"></div>
</div>
<div id="score">Pizzen gefangen: 0</div>

<script>
  const game = document.getElementById('game');
  const player = document.getElementById('player');
  const scoreDisplay = document.getElementById('score');

  const gameWidth = game.clientWidth;
  const gameHeight = game.clientHeight;
  const playerWidth = player.clientWidth;
  const playerHeight = player.clientHeight;

  let playerX = (gameWidth - playerWidth) / 2;
  let score = 0;

  const pizzas = [];
  const pizzaSize = 40;

  player.style.left = playerX + 'px';

  // Steuern mit Pfeiltasten
  document.addEventListener('keydown', e => {
    const step = 15;
    if (e.key === 'ArrowLeft') {
      playerX -= step;
      if (playerX < 0) playerX = 0;
      player.style.left = playerX + 'px';
    } else if (e.key === 'ArrowRight') {
      playerX += step;
      if (playerX > gameWidth - playerWidth) playerX = gameWidth - playerWidth;
      player.style.left = playerX + 'px';
    }
  });

  // Pizza erzeugen
  function createPizza() {
    const pizza = document.createElement('div');
    pizza.classList.add('pizza');
    pizza.textContent = 'üçï';
    pizza.style.left = Math.random() * (gameWidth - pizzaSize) + 'px';
    pizza.style.top = '-50px';
    game.appendChild(pizza);
    pizzas.push({el: pizza, x: parseFloat(pizza.style.left), y: -50});
  }

  // Kollision erkennen
  function isColliding(px, py, pw, ph, ox, oy, ow, oh) {
    return !(px > ox + ow || px + pw < ox || py > oy + oh || py + ph < oy);
  }

  // Spiel-Loop
  function gameLoop() {
    // Neue Pizza zuf√§llig erzeugen (ca alle 1,5 Sekunden)
    if (Math.random() < 0.02) {
      createPizza();
    }

    // Pizzas fallen lassen und checken, ob gefangen oder unten
    for (let i = pizzas.length -1; i >=0; i--) {
      const p = pizzas[i];
      p.y += 4;  // Fallgeschwindigkeit
      if (p.y > gameHeight) {
        // Pizza raus aus Spielfeld, entfernen
        game.removeChild(p.el);
        pizzas.splice(i,1);
        continue;
      }
      p.el.style.top = p.y + 'px';

      // Kollision mit Spieler?
      if (isColliding(playerX, gameHeight - playerHeight - 10, playerWidth, playerHeight,
                      p.x, p.y, pizzaSize, pizzaSize)) {
        score++;
        scoreDisplay.textContent = 'Pizzen gefangen: ' + score;
        game.removeChild(p.el);
        pizzas.splice(i,1);
      }
    }

    requestAnimationFrame(gameLoop);
  }

  gameLoop();
</script>

</body>
</html>
